#!/usr/bin/env bash

set -euo pipefail
if [[ "${1-}" == "core" ]]; then
    env="test-core"
    task="test-unit"
    shift
elif [[ "${1-}" == "gpu" ]]; then
    env="test-gpu"
    task="test-gpu"
    shift
else
    env="test-313"
    task="test-unit"
fi

(pixi run -e "$env" "$task" "$@" && notify-send "pixi $env" "success") || notify-send "pixi $env" "failed"
